<archimate:BusinessProcess
    xmlns:archimate="http://www.archimatetool.com/archimate"
    name="Create an Azure Service principal"
    id="193ec96b-787a-470b-9973-cef7e4ab7000"
    documentation="Azure Kubernetes Service (AKS) requires an Azure Active Directory service principal to interact with Azure APIs. The service principal is needed to dynamically manage resources such as user-defined routes and the Layer 4 Azure Load Balancer. We will set up the service principal using the Azure Cli from PowerShell:&#xA;&#xA;Open a PowerShell console and run az login to log into your Azure subscription.&#xA; &#xA;To create a service principal, type: az ad sp create-for-rbac –skip-assignment&#xA;&#xA;This creates an Azure Service principal without a default assignment. The service principal command will produce an output. Copy this information as we will need it at a later stage.&#xA;&#xA;PS /home/nicolas> az ad sp create-for-rbac --skip-assignment&#xA;{&#xA;  &quot;appId&quot;: &quot;d085eff9-0af3-488b-91b1-8a8c14ad68f0&quot;,&#xA;  &quot;displayName&quot;: &quot;azure-cli-2020-06-21-09-15-00&quot;,&#xA;  &quot;name&quot;: &quot;http://azure-cli-2020-06-21-09-15-00&quot;,&#xA;  &quot;password&quot;: &quot;IN1o7FPmhVoxqgljyTHOZll~8O2drV~Oqb&quot;,&#xA;  &quot;tenant&quot;: &quot;9ed32a6e-1a31-4497-85f8-0ae534376370&quot;&#xA;}&#xA;&#xA;Store the unique ACR ID as a variable: $acrid = az acr show --name NexSysContainerRegistry --resource-group NexSys --query “id”--output tsv&#xA;&#xA;&#xA;Use the “appId” from service principal creation step in the command below: az role assignment create –assignee “appid” –role Reader –scope $acrid&#xA;&#xA; az role assignment create --assignee “d085eff9-0af3-488b-91b1-8a8c14ad68f0” --role Reader --scope $acrid"/>
